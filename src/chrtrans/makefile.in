#
# Makefile for the makeuctb and unicode tables.
#
# This may not yet work for the general case.
# Only some dependencies included.
#
#
SHELL = /bin/sh

prefix		= @prefix@
exec_prefix	= @exec_prefix@
top_srcdir	= @top_srcdir@
srcdir		= @srcdir@
VPATH		= $(srcdir)

WWWINC		= WWW/Library/Implementation
SITE_DEFS	= # FIXME: set in parent makefile

CC		= @CC@
CPP		= @CPP@
CFLAGS		= @CFLAGS@
CPP_OPTS	= @DEFS@ @CPPFLAGS@ \
		-I../.. \
		-I$(top_srcdir)/src \
		-I$(top_srcdir)/$(WWWINC) \
		$(SITE_DEFS)
CC_OPTS		= $(CPP_OPTS) $(CFLAGS)

#
# This file contains the font map for the default (hardware) font
#

FONTMAP_INC = iso01_uni.h# default, if not set by recursive call

### #include $(TOPDIR)/Rules.make ???

### fastdep: $(FONTMAP_INC)

CHRTR=

TABLES= $(CHRTR)iso01_uni.h \
 $(CHRTR)def7_uni.h \
 $(CHRTR)iso02_uni.h \
 $(CHRTR)cp1252_uni.h \
 $(CHRTR)dmcs_uni.h \
 $(CHRTR)mac_uni.h \
 $(CHRTR)next_uni.h \
 $(CHRTR)koi8r_uni.h \
 $(CHRTR)viscii_uni.h \
 $(CHRTR)cp437_uni.h \
 $(CHRTR)cp850_uni.h \
 $(CHRTR)cp852_uni.h \
 $(CHRTR)cp866_uni.h \
 $(CHRTR)cp737_uni.h \
 $(CHRTR)cp869_uni.h \
 $(CHRTR)cp864_uni.h \
 $(CHRTR)cp862_uni.h \
 $(CHRTR)cp1250_uni.h \
 $(CHRTR)cp1251_uni.h \
 $(CHRTR)cp1253_uni.h \
 $(CHRTR)cp1255_uni.h \
 $(CHRTR)cp1256_uni.h \
 $(CHRTR)iso03_uni.h \
 $(CHRTR)iso04_uni.h \
 $(CHRTR)iso05_uni.h \
 $(CHRTR)iso06_uni.h \
 $(CHRTR)iso07_uni.h \
 $(CHRTR)iso08_uni.h \
 $(CHRTR)iso09_uni.h \
 $(CHRTR)iso10_uni.h \
 $(CHRTR)utf8_uni.h \
 $(CHRTR)rfc_suni.h \
 $(CHRTR)mnemonic_suni.h \
 $(CHRTR)mnem_suni.h

default: $(FONTMAP_INC)

tables: $(TABLES)

makeuctb: makeuctb.o
	$(CC) $(CC_OPTS) -o makeuctb makeuctb.o

makeuctb.o: $(srcdir)/UCkd.h $(srcdir)/makeuctb.c

.SUFFIXES : .tbl .i

.c.o:
@RULE_CC@
	@ECHO_CC@$(CC) $(CC_OPTS) -c $(srcdir)/$*.c

.c.i:
@RULE_CC@
	@ECHO_CC@$(CPP) -C $(CPP_OPTS) $*.c >$@

.tbl.h:
	./makeuctb $(srcdir)/$*.tbl > $@

# table files listed here once again to get the make dependencies
# right, in case makeuctb was recompiled.
def7_uni.h:		$(srcdir)/def7_uni.tbl		makeuctb
iso01_uni.h:		$(srcdir)/iso01_uni.tbl		makeuctb
iso02_uni.h:		$(srcdir)/iso02_uni.tbl		makeuctb
cp1252_uni.h:		$(srcdir)/cp1252_uni.tbl	makeuctb
dmcs_uni.h:		$(srcdir)/dmcs_uni.tbl		makeuctb
mac_uni.h:		$(srcdir)/mac_uni.tbl		makeuctb
next_uni.h:		$(srcdir)/next_uni.tbl		makeuctb
koi8r_uni.h:		$(srcdir)/koi8r_uni.tbl		makeuctb
viscii_uni.h:		$(srcdir)/viscii_uni.tbl	makeuctb
cp437_uni.h:		$(srcdir)/cp437_uni.tbl		makeuctb
cp850_uni.h:		$(srcdir)/cp850_uni.tbl		makeuctb
cp852_uni.h:		$(srcdir)/cp852_uni.tbl		makeuctb
cp866_uni.h:		$(srcdir)/cp866_uni.tbl		makeuctb
cp737_uni.h:		$(srcdir)/cp737_uni.tbl		makeuctb
cp869_uni.h:		$(srcdir)/cp869_uni.tbl		makeuctb
cp864_uni.h:		$(srcdir)/cp864_uni.tbl		makeuctb
cp862_uni.h:		$(srcdir)/cp862_uni.tbl		makeuctb
cp1250_uni.h:		$(srcdir)/cp1250_uni.tbl	makeuctb
cp1251_uni.h:		$(srcdir)/cp1251_uni.tbl	makeuctb
cp1253_uni.h:		$(srcdir)/cp1253_uni.tbl	makeuctb
cp1255_uni.h:		$(srcdir)/cp1255_uni.tbl	makeuctb
cp1256_uni.h:		$(srcdir)/cp1256_uni.tbl	makeuctb
iso03_uni.h:		$(srcdir)/iso03_uni.tbl		makeuctb
iso04_uni.h:		$(srcdir)/iso04_uni.tbl		makeuctb
iso05_uni.h:		$(srcdir)/iso05_uni.tbl		makeuctb
iso06_uni.h:		$(srcdir)/iso06_uni.tbl		makeuctb
iso07_uni.h:		$(srcdir)/iso07_uni.tbl		makeuctb
iso08_uni.h:		$(srcdir)/iso08_uni.tbl		makeuctb
iso09_uni.h:		$(srcdir)/iso09_uni.tbl		makeuctb
iso10_uni.h:		$(srcdir)/iso10_uni.tbl		makeuctb
utf8_uni.h:		$(srcdir)/utf8_uni.tbl		makeuctb
mnemonic_suni.h:	$(srcdir)/mnemonic_suni.tbl	makeuctb
mnem_suni.h:		$(srcdir)/mnem_suni.tbl		makeuctb
rfc_suni.h:		$(srcdir)/rfc_suni.tbl		makeuctb

clean:
	rm -f makeuctb *.o *uni.h

distclean: clean
	-rm -rf obsolete
	rm -f core *.bak *.sav *~ *.h_old

depend :
	makedepend -fmakefile -- $(CPP_OPTS) -- $(C_SRC)

# DO NOT DELETE THIS LINE -- make depend depends on it.
